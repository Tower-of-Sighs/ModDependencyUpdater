<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <link href="/src/styles.css" rel="stylesheet"/>
    <link href="/src/assets/app-icon.ico" rel="icon"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title data-i18n="app_title">Mod Dependency Updater</title>
    <script type="module" src="/src/main.ts" defer></script>
</head>
<body>
<div class="container">
    <header class="app-header">
        <div class="brand">
            <img alt="App Icon" class="brand-icon" src="/src/assets/app-icon.ico"/>
            <div>
                <h1 data-i18n="app_title">Mod Dependency Updater</h1>
                <p class="subtitle" data-i18n="app_subtitle">Update your Gradle dependencies with ease</p>
            </div>
        </div>
        <div class="controls">
            <select aria-label="Language" id="lang-select">
                <option value="zh-CN">中文</option>
                <option value="en">English</option>
            </select>
            <button class="secondary" data-i18n="btn_tools" id="tools-btn">Tools</button>
        </div>
    </header>

    <main id="main-view">
        <div class="card">
            <div class="form-group">
                <label data-i18n="label_gradle_path" for="gradle-path">build.gradle Path</label>
                <div class="input-group">
                    <input data-i18n-placeholder="ph_select_gradle" id="gradle-path" placeholder="Select your build.gradle..."
                           readonly type="text"/>
                    <button class="secondary" data-i18n="btn_browse" id="browse-btn">Browse</button>
                </div>
            </div>

            <div class="grid-2">
                <div class="form-group">
                    <label data-i18n="label_source" for="source-select">Source</label>
                    <select id="source-select">
                        <option value="curseforge">CurseForge</option>
                        <option value="modrinth">Modrinth</option>
                    </select>
                </div>

                <div class="form-group" id="project-group">
                    <label data-i18n="label_project_id" for="project-id" id="project-label">Project ID</label>
                    <input data-i18n-placeholder="ph_project_id" id="project-id" placeholder="123456" type="text"/>
                </div>
            </div>

            <div class="grid-2">
                <div class="form-group" id="mc-version-select-group">
                    <label data-i18n="label_mc_version" for="mc-version">Minecraft Version</label>
                    <select id="mc-version"></select>
                </div>

                <div class="form-group" id="loader-select-group">
                    <label data-i18n="label_loader" for="loader-select">Loader</label>
                    <select id="loader-select"></select>
                </div>
            </div>

            <div class="grid-2">
                <div class="form-group" id="mc-version-input-group" style="display:none">
                    <label data-i18n="label_mc_version_input" for="mc-version-input">Minecraft Version (manual)</label>
                    <input data-i18n-placeholder="label_mc_version" id="mc-version-input" placeholder="Minecraft Version"
                           type="text"/>
                </div>

                <div class="form-group" id="loader-input-group" style="display:none">
                    <label data-i18n="label_loader_input" for="loader-input">Loader (manual)</label>
                    <input data-i18n-placeholder="label_loader" id="loader-input" placeholder="Loader" type="text"/>
                </div>
            </div>

            <div class="form-group" id="api-key-group">
                <label data-i18n="label_cf_api" for="cf-api-key">CurseForge API Key <small data-i18n="hint_cf_api">(Optional
                    if env var set)</small></label>
                <input data-i18n-placeholder="ph_cf_api" id="cf-api-key" placeholder="Enter API Key..."
                       type="password"/>
            </div>

            <div class="grid-2">
                <div class="form-group">
                    <label data-i18n="label_mode" for="mode-select">Mode</label>
                    <select id="mode-select">
                        <option data-i18n="mode_single" value="single">Single</option>
                        <option data-i18n="mode_batch" value="batch">Batch</option>
                    </select>
                </div>
                <div class="form-group">
                    <button class="secondary" data-i18n="btn_fetch_options" id="fetch-options">Fetch Options</button>
                </div>
            </div>

            <div class="form-group">
                <label data-i18n="label_cache_versions" for="cache-toggle">Cache mod versions</label>
                <div class="input-group">
                    <label class="switch">
                        <input id="cache-toggle" type="checkbox"/>
                        <span class="slider"></span>
                    </label>
                    <button class="secondary" data-i18n="btn_clear_cache" id="clear-cache-btn">Clear Cache</button>
                    <button class="secondary" data-i18n="btn_refresh_cache" id="refresh-cache-btn">Refresh Cache
                    </button>
                </div>
                <small data-i18n="hint_cache_versions">Cache full version metadata for faster operations</small>
            </div>

            <div class="form-group" id="batch-group" style="display:none">
                <label data-i18n="label_batch_items" for="batch-items">Projects (one per line)</label>
                <textarea data-i18n-placeholder="ph_batch_items" id="batch-items" placeholder="123456\nmodrinth-slug"
                          rows="10"></textarea>
            </div>

            <button class="primary" data-i18n="btn_update" id="update-btn">Update Dependency</button>
        </div>

        <div class="output-section">
            <h3 data-i18n="label_log">Log Output</h3>
            <div class="input-group">
                <button class="secondary" data-i18n="btn_clear_log" id="clear-log-btn">Clear Logs</button>
                <button class="secondary" data-i18n="btn_save_log" id="save-log-btn">Save Logs</button>
                <button class="secondary" data-i18n="btn_open_logs" id="open-log-btn">Open Logs Folder</button>
            </div>
            <div class="log-box" data-i18n="log_wait" id="log-output">Waiting for action...</div>
        </div>
        <div id="version-modal" class="modal-overlay" style="display:none">
            <div class="modal">
                <h3 data-i18n="label_select_version">Select Version</h3>
                <div class="mod-strip" id="mod-strip"></div>
                <div class="version-list" id="version-list"></div>
                <div class="input-group">
                    <button class="secondary" data-i18n="btn_cancel" id="version-cancel">Cancel</button>
                    <button class="primary" data-i18n="btn_apply" id="version-apply">Apply Selected Version</button>
                    <button class="primary" data-i18n="btn_apply_all" id="version-apply-all">Apply All Selected</button>
                </div>
            </div>
        </div>
    </main>
    <main id="tool-view" style="display:none">
        <div class="card">
            <div class="form-group">
                <div class="input-group">
                    <h3 data-i18n="tool_title" id="tool-title">Mapping Converter (AW ↔ AT)</h3>
                    <button class="secondary" data-i18n="btn_back" id="tool-back-btn">Back</button>
                </div>
            </div>
            <div class="form-group">
                <label data-i18n="label_input_file" for="tool-input-path" id="tool-label-input">Input File</label>
                <div class="input-group">
                    <input data-i18n-placeholder="ph_select_aw_at" id="tool-input-path"
                           placeholder="Select your AW/AT file..." readonly type="text"/>
                    <button class="secondary" data-i18n="btn_browse" id="tool-browse-btn">Browse</button>
                </div>
            </div>
            <div class="grid-2">
                <div class="form-group">
                    <label data-i18n="label_mc_version_tool" for="tool-mc-version" id="tool-label-mc">Minecraft
                        Version</label>
                    <input id="tool-mc-version" placeholder="1.21.1" type="text"/>
                </div>
                <div class="form-group">
                    <label data-i18n="label_direction" for="tool-direction" id="tool-label-direction">Direction</label>
                    <select id="tool-direction">
                        <option data-i18n="dir_aw_to_at" value="aw_to_at">AW → AT</option>
                        <option data-i18n="dir_at_to_aw" value="at_to_aw">AT → AW</option>
                        <option data-i18n="dir_aw_to_aw" value="aw_to_aw">AW → AW</option>
                    </select>
                </div>
            </div>
            <div class="grid-2">
                <div class="form-group" id="tool-aw-input-mapping-group" style="display:none">
                    <label data-i18n="label_aw_input_mapping" for="tool-aw-input-mapping" id="tool-label-aw-input">AW
                        Input Mapping</label>
                    <select id="tool-aw-input-mapping">
                        <option data-i18n="opt_mapping_official" value="official">Official</option>
                        <option data-i18n="opt_mapping_yarn" value="yarn">Yarn</option>
                    </select>
                </div>
                <div class="form-group" id="tool-aw-output-mapping-group" style="display:none">
                    <label data-i18n="label_aw_output_mapping" for="tool-aw-output-mapping" id="tool-label-aw-output">AW
                        Output Mapping</label>
                    <select id="tool-aw-output-mapping">
                        <option data-i18n="opt_mapping_official" value="official">Official</option>
                        <option data-i18n="opt_mapping_yarn" value="yarn">Yarn</option>
                    </select>
                </div>
                <div class="form-group" id="tool-aw-target-mapping-group" style="display:none">
                    <label data-i18n="label_aw_target_mapping" for="tool-aw-target-mapping" id="tool-label-aw-target">AW
                        Target Mapping</label>
                    <select id="tool-aw-target-mapping">
                        <option data-i18n="opt_mapping_official" value="official">Official</option>
                        <option data-i18n="opt_mapping_yarn" value="yarn">Yarn</option>
                    </select>
                </div>
            </div>
            <div class="form-group" id="tool-aw-output-name-group" style="display:none">
                <label data-i18n="label_aw_output_name" for="tool-aw-output-name">AW Output File Name</label>
                <input data-i18n-placeholder="ph_aw_output_name" id="tool-aw-output-name"
                       placeholder="converted.accesswidener" type="text"/>
            </div>
            <div class="form-group">
                <button class="primary" data-i18n="btn_convert" id="tool-convert-btn">Convert</button>
            </div>
            <div class="form-group">
                <div id="tool-stats"></div>
                <div id="tool-failures"></div>
            </div>
        </div>
        <div class="output-section">
            <h3 data-i18n="label_log">Log Output</h3>
            <div class="input-group">
                <button class="secondary" data-i18n="btn_clear_log" id="tool-clear-log-btn">Clear Logs</button>
                <button class="secondary" data-i18n="btn_save_log" id="tool-save-log-btn">Save Logs</button>
                <button class="secondary" data-i18n="btn_open_logs" id="tool-open-log-btn">Open Logs Folder</button>
            </div>
            <div class="log-box" id="tool-log-output"></div>
        </div>
    </main>
</div>
</body>
</html>
